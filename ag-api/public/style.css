/* ========================
   Agentlyne — Unified CSS
   ======================== */

/* ---------- Theme / Vars ---------- */
:root{
  --page:#0b1220;

  /* Avatar sizing + spacing (final) */
  --card-size: clamp(230px, 26vw, 360px);
  --stage-h:  calc(var(--card-size) * 1.0);

  /* Visual scales (final) */
  --center-scale: 0.90;
  --side-scale:   0.90;
  --side-off:     calc(var(--card-size) * 1.05);
  --side-opacity: 0.42;

  /* Brand */
  --brand-500:#0ea5e9;
  --brand-600:#0284c7;

  /* Buttons */
  --btn-h: 48px;

  /* Header buttons */
  --nav-btn-h: 40px;
  --nav-btn-fs: .95rem;
  --nav-btn-px: .9rem;

  /* Subtle pattern palette */
  --p-ink: #0f172a;
  --p-a:   #7cb8ff;
  --p-b:   #b9a6ff;
  --p-a-20: color-mix(in oklab, var(--p-a) 20%, transparent);
  --p-b-18: color-mix(in oklab, var(--p-b) 18%, transparent);

  /* Parallax (set by JS) */
  --bg-shift: 0px;
  --orb-shift:0px;
  --fg-shift: 0px;
}
@media (min-width:640px){
  :root{ --btn-h:48px; --nav-btn-h:44px; --nav-btn-fs:1rem; --nav-btn-px:1rem; }
}

html,body{height:100%}
body{
  background:var(--page);
  color:#EAF2FF;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  overflow-x:hidden;
}
.wrap{max-width:1200px;margin-inline:auto}

/* ---------- Background FX ---------- */
#bgCanvas{
  position:fixed; inset:0; z-index:-2; display:block;
  transform: translateX(var(--bg-shift)) scale(1.18);
  transition: transform 800ms cubic-bezier(.22,.61,.36,1);
  will-change: transform;
  filter: brightness(1.26) contrast(1.14) saturate(1.05);
}
.glow-orb{
  position:absolute;width:600px;height:600px;border-radius:50%;
  filter:blur(120px);opacity:.15;pointer-events:none;animation:float 20s ease-in-out infinite;
  transition: transform 800ms cubic-bezier(.22,.61,.36,1);
  will-change: transform;
}
.glow-orb.blue{   background:radial-gradient(circle, var(--brand-500), transparent); top:10%; left:-10%; transform: translateX(var(--orb-shift)); }
.glow-orb.purple{ background:radial-gradient(circle, #8b5cf6, transparent); bottom:10%; right:-10%; animation-delay:-10s; transform: translateX(calc(var(--orb-shift) * -1)); }
@keyframes float{
  0%,100%{transform:translate(0,0) scale(1)}
  33%{transform:translate(30px,-30px) scale(1.05)}
  66%{transform:translate(-20px,20px) scale(.95)}
}

/* ---------- Buttons ---------- */
.btn{
  display:inline-flex;align-items:center;justify-content:center;gap:.5rem;
  border-radius:9999px;padding:.75rem 1.5rem;font-weight:600;transition:all .2s ease;
  backdrop-filter: blur(12px);
  height:var(--btn-h); line-height:1; white-space:nowrap; min-width:44px;
}
.btn-primary{background:linear-gradient(135deg, var(--brand-500), var(--brand-600));color:#fff;box-shadow:0 8px 32px rgba(14,165,233,.3)}
.btn-outline{border:1px solid rgba(255,255,255,.15);background:rgba(255,255,255,.05);color:#e2e8f0}
.btn:hover{transform:translateY(-2px);box-shadow:0 12px 40px rgba(14,165,233,.4)}

/* Header nav */
header nav{ gap:.5rem; white-space:nowrap; }
header nav .btn{ height:var(--nav-btn-h); padding:.5rem var(--nav-btn-px); font-size:var(--nav-btn-fs); }

/* ---------- Hero ---------- */
.hero{ padding-top:6vh; padding-bottom:4vh; position:relative; }
.hero::before{
  content:""; position:absolute; inset:-12vh 0 -12vh 0; pointer-events:none; z-index:-1;
  background:
    radial-gradient(120% 70% at 50% 35%, rgba(255,255,255,.06), transparent 60%),
    radial-gradient(90% 60% at 60% 70%, rgba(2,8,23,.35), transparent 65%);
  transform: translateX(calc(var(--bg-shift) * 0.25)) scale(1.06);
  transition: transform 800ms cubic-bezier(.22,.61,.36,1);
  mask-image: linear-gradient(180deg, #000 0%, #000 78%, transparent 100%);
  -webkit-mask-image: linear-gradient(180deg, #000 0%, #000 78%, transparent 100%);
}

/* Stage (fixed frame — does NOT move) */
.stage{
  position:relative;
  height:var(--stage-h);
  margin-top:48px;
  margin-bottom:110px;
  display:flex; align-items:flex-end; justify-content:center;
  perspective:1200px; overflow:visible; isolation:isolate;
  transform: none !important;
}

/* Carousel */
.carousel-track{
  position:relative;width:100%;height:100%;
  display:flex;align-items:flex-end;justify-content:center;transform-style:preserve-3d;
  transform: none !important;            /* keep perfectly centered */
  transition: none !important;           /* prevent drift */
  will-change: transform;
}

/* Cards */
.card{
  position:absolute; left:50%; bottom:0; transform-origin:50% 100%;
  width:var(--card-size); height:var(--card-size);
  transition: transform 820ms cubic-bezier(.22,.61,.36,1),
              opacity   820ms ease,
              filter    420ms ease;
  cursor:pointer; transform-style:preserve-3d; will-change: transform, opacity, filter;
}
.card img{
  width:100%; height:100%; object-fit:contain; object-position:center 62%;
  transform: scale(var(--img-scale, 1)) translateY(var(--img-y, 0%));
  transform-origin:center bottom;
  filter: drop-shadow(0 20px 80px rgba(0,0,0,.30));
}
.card.active img{ filter: drop-shadow(0 24px 90px rgba(14,165,233,.22)) drop-shadow(0 16px 48px rgba(0,0,0,.35)); }

.card.active{
  transform: translateX(-50%) scale(var(--center-scale));
  opacity:1; z-index:10;
}
.card.prev{
  transform: translateX(calc(-50% - var(--side-off))) scale(var(--side-scale)) !important;
  opacity:var(--side-opacity); z-index:4; filter:blur(.15px);
}
.card.next{
  transform: translateX(calc(-50% + var(--side-off))) scale(var(--side-scale)) !important;
  opacity:var(--side-opacity); z-index:4; filter:blur(.15px);
}
.card.hidden{ transform: translateX(-50%) scale(.64); opacity:0; z-index:1; pointer-events:none; }

/* Per-image trims (visual normalizer) */
.carousel-track .card:nth-child(1) img{ --img-scale:1.00; --img-y:0%; }     /* Riley */
.carousel-track .card:nth-child(2) img{ --img-scale:1.34; --img-y:9.7%; }   /* Julia */
.carousel-track .card:nth-child(3) img{ --img-scale:1.04; --img-y:-0.5%; }  /* Hana */

/* Name badge (fixed) */
.name-badge{
  position:absolute; bottom:-52px; left:50%; transform:translateX(-50%);
  background:rgba(15,23,42,.6); backdrop-filter:blur(20px); color:#e6eefb;
  border-radius:28px; padding:.6rem 1.1rem; font-weight:600; border:1px solid rgba(255,255,255,.1);
  white-space:nowrap; box-shadow:0 10px 40px rgba(0,0,0,.30); z-index:20;
}
.card .name-badge{ display:none !important; }

/* Controls (fixed) */
.bottom-controls{
  position:absolute; left:50%; transform:translateX(-50%) !important;
  bottom:-96px; display:flex; align-items:center; gap:12px; z-index:25; pointer-events:auto;
}
.bottom-controls * { transform:none !important; }
.bottom-controls .arrow{
  width:38px;height:38px;border-radius:50%;display:grid;place-items:center;
  background:rgba(255,255,255,.06); color:#e6eefb; border:1px solid rgba(255,255,255,.18);
  cursor:pointer; user-select:none; transition:transform .18s ease, background .18s ease, border-color .18s ease;
  font-size:18px;
}
.bottom-controls .arrow:hover{ background:rgba(14,165,233,.18); border-color:rgba(14,165,233,.35); transform:scale(1.08); }
.nav-dots{ display:flex; align-items:center; gap:10px; }
.dot{ width:7px;height:7px;border-radius:50%;background:rgba(255,255,255,.30);cursor:pointer;transition:all .26s ease }
.dot.active{ width:22px;height:7px;border-radius:9999px;background:linear-gradient(90deg, var(--brand-500), var(--brand-600));box-shadow:0 0 0 1px rgba(255,255,255,.10), 0 6px 18px rgba(14,165,233,.35) }
.dot:hover:not(.active){ background:rgba(255,255,255,.45); transform:scale(1.15); }

/* Fixed badge */
#hero-badge{ position:absolute; left:50%; transform:translateX(-50%); bottom:-52px; z-index:26; }

/* ---------- Sections (translucent so stars show) ---------- */
.section-light{ background: transparent !important; }
.section-light .muted{color:#b8c4da}
.section-dark{ background: transparent !important; }

/* Cards inside the solutions section */
.plan-card{
  grid-column:span 12;
  background:#0b1020;
  border:1px solid rgba(255,255,255,.08);
  border-radius:24px;
  background-image:radial-gradient(900px 300px at -10% -20%, rgba(14,165,233,.10), transparent 60%);
  box-shadow:0 14px 38px rgba(0,0,0,.35);
  padding:28px;
}
.plan-head{display:flex;gap:18px;align-items:flex-start}
.plan-title{font-size:1.35rem;font-weight:800;letter-spacing:-.01em;color:#e9f2ff}
.plan-sub{color:#a9bad3;margin-top:6px}
.plan-cta{
  display:inline-flex;align-items:center;justify-content:center;gap:.5rem;
  padding:.75rem 1.1rem;border-radius:9999px;font-weight:900;letter-spacing:.04em;
  color:#0f172a;background:#fff;border:2px solid transparent;box-shadow:0 10px 28px rgba(0,0,0,.25);
  background-image: linear-gradient(#fff,#fff), linear-gradient(135deg,var(--brand-500),var(--brand-600));
  background-origin: border-box; background-clip: padding-box, border-box;
  margin-top:10px; margin-bottom:18px;           /* spacing fix */
}
.features{display:grid;gap:16px;margin-top:16px}
.feat{display:flex;gap:.6rem;align-items:flex-start;color:#cfe0ff}
.feat svg{width:18px;height:18px;flex:none;margin-top:2px}
@media (min-width:980px){ .plan-card{grid-column:span 6} }

/* Learn More bits */
.pill-cta{display:inline-flex;align-items:center;gap:.5rem;padding:.5rem 1rem;border-radius:9999px;font-weight:600;background:#0f172a;color:#e2e8f0;border:1px solid rgba(255,255,255,.08);box-shadow:0 6px 24px rgba(0,0,0,.25)}
.learn-stack{position:relative;width:min(660px,90vw);margin:36px auto 0}
.call-banner{background:#0b0b0f;color:#fff;border-radius:50px;padding:.6rem .9rem;display:flex;align-items:center;gap:.8rem;width:max-content;margin:0 auto;box-shadow:0 14px 50px rgba(2,8,23,.35), inset 0 0 0 1px rgba(255,255,255,.06)}
.call-avatar{width:36px;height:36px;border-radius:9999px;overflow:hidden}
.call-title{font-weight:700;font-size:.9rem;line-height:1}
.call-sub{font-size:.7rem;opacity:.8}
.icon-btn{width:36px;height:36px;border-radius:9999px;display:grid;place-items:center;color:#fff}
.icon-decline{background:#ef4444}.icon-accept{background:#22c55e}
.vert-line{width:2px;height:140px;margin:22px auto;border-radius:999px;background:linear-gradient(180deg,rgba(99,102,241,.2),rgba(56,189,248),rgba(99,102,241,.2));filter:drop-shadow(0 10px 30px rgba(56,189,248,.55))}
.ai-card{background:#fff;color:#0f172a;border-radius:22px;padding:14px 18px;display:flex;align-items:center;gap:12px;width:max-content;margin:0 auto;box-shadow:0 20px 60px rgba(2,8,23,.18),0 0 0 1px rgba(2,8,23,.06)}
.ai-chip{font-weight:700;font-size:.75rem;padding:.25rem .5rem;border-radius:9999px;background:#eef6ff;color:#0284c7}
.wave{display:flex;gap:4px;height:14px}
.wave span{width:4px;border-radius:3px;background:linear-gradient(#0ea5e9,#6ee7b7);animation:bar 1s ease-in-out infinite;opacity:.9}
.wave span:nth-child(2){animation-delay:.1s}.wave span:nth-child(3){animation-delay:.2s}.wave span:nth-child(4){animation-delay:.3s}.wave span:nth-child(5){animation-delay:.4s}
@keyframes bar{ 0%,100%{transform:scaleY(.4)} 40%{transform:scaleY(1)} }

/* ---------- Why teams choose ---------- */
.problems-head{display:flex;justify-content:center;text-align:center;margin-bottom:18px}
.section-dark .problem-wrap{
  border-radius:36px; padding:28px; border:1px solid rgba(255,255,255,.06);
  box-shadow:0 20px 50px rgba(0,0,0,.35);
  background: rgba(12,16,28,.52) !important; /* translucent so stars show */
}
.problem-grid{display:grid;grid-template-columns:repeat(12,minmax(0,1fr));gap:20px}
.problem-card{
  grid-column:span 12;min-height:240px;position:relative;overflow:hidden;border-radius:28px;padding:28px;
  background: rgba(255,255,255,.035) !important;
  border:1px solid rgba(255,255,255,.08);
  transition:transform .22s ease, box-shadow .22s ease, border-color .22s ease;
}
.problem-card:hover{transform:translateY(-4px);box-shadow:0 26px 70px rgba(2,8,23,.45);border-color:rgba(255,255,255,.16)}
.problem-card h3{font-size:1.45rem;font-weight:900;letter-spacing:-.01em}
.problem-card p{color:#a9bad3;margin-top:.55rem;max-width:48ch;line-height:1.55}
.problem-card .angle-dots,.problem-card .dotbg{
  position:absolute;inset:auto -40px -40px auto;width:58%;height:58%;
  background-image:radial-gradient(rgba(255,255,255,.08) 2px, transparent 2px);
  background-size:18px 18px;transform:rotate(12deg);opacity:.75;pointer-events:none;
}
.problem-card.card-accent{
  background:
    radial-gradient(110% 100% at 0% 0%, rgba(99,102,241,.18), transparent 45%),
    radial-gradient(110% 100% at 100% 100%, rgba(56,189,248,.18), transparent 45%),
    linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
  border-color:rgba(146,180,255,.25);
}
.card-accent .btn-learn{
  display:inline-flex;align-items:center;gap:.45rem;margin-top:18px;font-weight:700;background:#fff;color:#0f172a;padding:.6rem 1rem;border-radius:9999px;
  box-shadow:0 10px 30px rgba(0,0,0,.25);
}
@media (min-width:900px){ .problem-card{grid-column:span 4} }

/* ---------- Workflow (diagram) ---------- */
.section-work{background:linear-gradient(#ffffff, #f7f8ff); color:#0f172a;}
.flow-wrap{position:relative}
.flow-grid{display:grid;gap:16px;grid-template-columns:repeat(6,minmax(0,1fr));grid-auto-rows:120px}
.flow-card{background:#fff;color:#0f172a;border-radius:16px;border:1px solid rgba(2,8,23,.08);box-shadow:0 10px 30px rgba(2,8,23,.08);display:grid;place-items:center;font-weight:700}
.flow-phone{grid-column:1/3;grid-row:1/3}.flow-route{grid-column:3/5;grid-row:1/3}.flow-book{grid-column:5/7;grid-row:1/3}
.flow-chat{grid-column:2/4;grid-row:3/5}.flow-loop{grid-column:4/6;grid-row:3/5}
.flow-lines{position:absolute;inset:0;pointer-events:none}
.flow-lines svg{width:100%;height:100%}
.flow-lines path{ stroke: url(#g1) }
.flow-bullet{display:flex;align-items:center;gap:.6rem;margin:.45rem 0;color:#334155}
.flow-bullet svg{flex:none;width:18px;height:18px}

/* ---------- Unified Workflow Panel ---------- */
.workflow-unified{
  position:relative; display:grid;
  grid-template-columns: 1.1fr 1fr; gap:0;
  background:#0b1020; border:1px solid rgba(255,255,255,.08);
  border-radius:28px; box-shadow:0 14px 38px rgba(0,0,0,.35); padding:28px; color:#e6eefb;
}
.workflow-unified::before{
  content:""; position:absolute; top:24px; bottom:24px; left:50%; transform:translateX(-50%);
  width:1px; background: linear-gradient(to bottom, transparent 0%, rgba(255,255,255,.12) 12%, rgba(255,255,255,.18) 50%, rgba(255,255,255,.12) 88%, transparent 100%);
  border-left:1px dashed rgba(255,255,255,.10);
}
.wf-col{ padding:6px 26px; }
.wf-left{ padding-right:42px; }
.wf-right{ padding-left:42px; }
.wf-pill{
  display:flex; align-items:center; justify-content:center;
  font-weight:900; letter-spacing:.04em;
  color:#0f172a; background:#f7fafc;
  border-radius:16px; border:2px dashed rgba(2,8,23,.22);
  padding:14px 18px;
}
.wf-mosaic{
  margin-top:18px; width:min(520px, 90%); height:140px; border-radius:16px;
  background:
    radial-gradient(14px 7px at 14px 12px, var(--p-a) 88%, transparent 100%),
    radial-gradient(14px 7px at 40px 38px, var(--p-b) 88%, transparent 100%),
    radial-gradient(14px 7px at 14px 38px, color-mix(in oklab, var(--p-a) 65%, var(--p-b)) 88%, transparent 100%),
    radial-gradient(14px 7px at 40px 12px, color-mix(in oklab, var(--p-b) 65%, var(--p-a)) 88%, transparent 100%);
  background-size: 54px 54px; background-repeat: repeat;
  box-shadow: inset 0 0 0 1px rgba(2,8,23,.05);
  opacity:.9;
}
@media (max-width: 980px){
  .workflow-unified{ grid-template-columns: 1fr; padding:22px 18px; }
  .workflow-unified::before{ display:none; }
  .wf-left{ padding-right:18px; }
  .wf-right{ padding-left:18px; margin-top:14px; }
}

/* ---------- Solutions grid ---------- */
.solutions-grid{ display:grid; grid-template-columns:repeat(12,minmax(0,1fr)); gap:28px; }
.plan-card{ grid-column:span 12; }
@media (min-width:900px){ .plan-card{ grid-column:span 6; } }
#solutions h2{ color:#fff; text-shadow:0 2px 14px rgba(0,0,0,.25); }
#solutions .plan-card{ background: rgba(12,16,28,.72) !important; border-color: rgba(255,255,255,.08) !important; }
#solutions::before, #solutions::after{ display:none !important; }

/* ---------- Spacing & utilities ---------- */
@media (max-width:820px){
  :root{ --card-size: min(78vw, 330px); }
  .card.prev,.card.next{ display:none; }
  .stage{ margin-bottom:92px; }
  .bottom-controls{ bottom:-80px; }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce){
  .card, .name-badge, .bottom-controls .arrow, #bgCanvas, .glow-orb, .stage, .hero::before, .carousel-track { transition:none !important; animation:none !important; }
}

/* Optional: hide decorative blocks */
.wf-mosaic{ display:none !important; }
.dot-matrix, .dots-soft{ display:none !important; }

/* Hide fallback error text */
#form-error, .footer-error, .error, .error-text { display:none; }

/* Voice demo modal */
.retell-modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.6);z-index:1000}
.retell-card{width:420px;height:560px;background:#0b1020;border-radius:16px;box-shadow:0 20px 60px rgba(0,0,0,.35);position:relative;overflow:hidden}
.retell-close{position:absolute;top:8px;right:10px;background:transparent;border:0;color:#fff;font-size:24px;cursor:pointer;z-index:1}
