<!doctype html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Agentlyne ‚Äî Innovative AI Solutions</title>
  <meta name="theme-color" content="#0ea5e9" />
  <meta name="description" content="Agentlyne answers calls, qualifies leads, and can run outbound campaigns automatically." />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700&family=Space+Grotesk:wght@500;600;700&display=swap" rel="stylesheet">

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['Manrope', 'ui-sans-serif', 'system-ui'],
            display: ['Space Grotesk', 'Manrope', 'ui-sans-serif', 'system-ui']
          },
          colors: { brand: { 500:'#0ea5e9', 600:'#0284c7' } }
        }
      }
    }
  </script>

  <!-- Site config + CSS -->
  <script src="/config.js"></script>
  <link rel="stylesheet" href="style.css" />

  <!-- Minimal modal CSS -->
  <style>
    .retell-modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(2,6,23,.7);backdrop-filter:blur(6px);z-index:1000}
    .retell-card{width:min(92vw,420px);height:min(88vh,560px);background:#0b1020;border:1px solid rgba(255,255,255,.08);border-radius:16px;box-shadow:0 20px 60px rgba(0,0,0,.35);position:relative;overflow:hidden}
    .retell-close{position:absolute;top:8px;right:10px;background:transparent;border:0;color:#fff;font-size:24px;cursor:pointer;z-index:1}
    body.modal-open{overflow:hidden}
  </style>
</head>
<body class="font-sans">
  <!-- background orbs + canvas (parallax) -->
  <canvas id="bgCanvas" aria-hidden="true"></canvas>
  <div class="glow-orb blue" aria-hidden="true"></div>
  <div class="glow-orb purple" aria-hidden="true"></div>

  <!-- Header -->
  <header class="sticky top-0 z-30">
    <div class="wrap px-6">
      <div class="h-16 mt-4 rounded-full flex items-center justify-between px-4 bg-slate-900/40 backdrop-blur-xl border border-white/10">
        <a class="flex items-center gap-2" href="index.html">
          <span class="inline-grid place-items-center h-9 w-9 rounded-full bg-gradient-to-br from-sky-400 to-violet-500">
            <svg width="16" height="16" viewBox="0 0 24 24" aria-hidden="true" fill="none">
              <path d="M12 3l8 4v6c0 4.418-3.582 8-8 8S4 17.418 4 13V7l8-4z" class="fill-white/95"/>
            </svg>
          </span>
          <strong class="text-slate-100">Agentlyne</strong>
        </a>
        <nav class="flex items-center gap-3">
          <a href="pricing.html" class="btn btn-outline">Pricing</a>
          <a href="book.html" class="btn btn-primary">Book a Call</a>
        </nav>
      </div>
    </div>
  </header>

  <!-- HERO -->
  <section class="hero relative">
    <div class="wrap px-6">
      <div class="grid lg:grid-cols-12 gap-12 items-start">
        <div class="lg:col-span-7">
          <h1 class="font-display text-5xl sm:text-6xl font-bold tracking-[-0.02em] leading-[1.05] bg-gradient-to-r from-white to-slate-300 bg-clip-text text-transparent">
            Answer every call.<br/>Book more appointments.
          </h1>
        </div>
        <div class="lg:col-span-5">
          <p class="text-lg text-slate-300/90 max-w-md mt-2">
            Our voice AI greets callers, qualifies leads, and schedules on your calendar‚Äîso revenue doesn't slip through the cracks.
          </p>
          <div class="mt-6 flex gap-3">
            <a id="live-demo" href="#" class="btn btn-primary" data-live-demo>Try the Live Demo</a>
            <a href="pricing.html" class="btn btn-outline">See Pricing</a>
          </div>
        </div>
      </div>

      <!-- Avatar Carousel -->
      <div class="stage" id="stage" aria-label="Agent avatars carousel">
        <div class="carousel-track">
          <div class="card prev" data-name="Riley ‚Äî Support Agent">
            <img src="bean.png" alt="Riley ‚Äî Support Agent" loading="eager" />
            <div class="name-badge" aria-hidden="true">Riley ‚Äî Support Agent</div>
          </div>

          <div class="card active" data-name="Julia ‚Äî Receptionist Agent">
            <img src="white.png" alt="Julia ‚Äî Receptionist Agent" />
            <div class="name-badge" aria-hidden="true">Julia ‚Äî Receptionist Agent</div>
          </div>

          <div class="card next" data-name="Hana ‚Äî Sales Agent">
            <img src="asian.png" alt="Hana ‚Äî Sales Agent" />
            <div class="name-badge" aria-hidden="true">Hana ‚Äî Sales Agent</div>
          </div>
        </div>

        <!-- Bottom-center controls -->
        <div class="bottom-controls" aria-label="Carousel controls">
          <button type="button" class="arrow" id="prevBtn" aria-label="Previous slide">‚Äπ</button>
          <div class="nav-dots" role="tablist" aria-label="Slide selector">
            <button type="button" class="dot" data-go="0" role="tab" aria-label="Go to Riley"></button>
            <button type="button" class="dot active" data-go="1" role="tab" aria-label="Go to Julia" aria-selected="true"></button>
            <button type="button" class="dot" data-go="2" role="tab" aria-label="Go to Hana"></button>
          </div>
          <button type="button" class="arrow" id="nextBtn" aria-label="Next slide">‚Ä∫</button>
        </div>
      </div>
    </div>
  </section>

  <!-- Why teams choose -->
  <section class="section-dark py-16">
    <div class="wrap px-6">
      <div class="problem-wrap">
        <div class="problems-head mb-6">
          <h2 class="font-display text-2xl md:text-3xl font-bold text-slate-200 w-full text-center">
            Why teams choose Agentlyne
          </h2>
        </div>

        <div class="problem-grid">
          <article class="problem-card">
            <div class="problem-icon">‚ö°</div>
            <h3>Leads vanish when calls wait</h3>
            <p>People reach out when they‚Äôre ready. If they hit a queue or voicemail, most never try again. We pick up instantly and keep them engaged.</p>
            <span class="angle-dots"></span>
          </article>

          <article class="problem-card card-accent">
            <div class="problem-icon">üìÖ</div>
            <h3>Scheduling without the back-and-forth</h3>
            <p>Your agent checks calendars, offers times, and confirms bookings in seconds‚Äîno phone tag, no manual follow-ups.</p>
            <a href="#workflow" class="btn-learn">
              See how it works
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <path d="M7 17L17 7M17 7H8M17 7v9" stroke="#0f172a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </a>
            <span class="angle-dots"></span>
          </article>

          <article class="problem-card">
            <div class="problem-icon">üõ°Ô∏è</div>
            <h3>Consistent experience, 24/7</h3>
            <p>Every caller gets a friendly greeting, proper qualification, and smart routing‚Äîat noon, at midnight, and on weekends.</p>
            <span class="angle-dots"></span>
          </article>
        </div>
      </div>
    </div>
  </section>

  <!-- WORKFLOW -->
  <section id="workflow" class="section-work py-24">
    <div class="wrap px-6">
      <div class="grid lg:grid-cols-2 gap-12 items-center">
        <div>
          <h2 class="font-display text-4xl md:text-5xl font-bold tracking-[-0.02em] text-slate-800">
            From first ring<br class="hidden md:block"> to confirmed booking
          </h2>
          <div class="mt-6 text-slate-600">
            <div class="flow-bullet">
              <svg viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M20 7L9 18l-5-5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
              Always-on coverage 24/7
            </div>
            <div class="flow-bullet">
              <svg viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M20 7L9 18l-5-5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
              Instant scheduling‚Äîno back-and-forth
            </div>
            <div class="flow-bullet">
              <svg viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M20 7L9 18l-5-5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
              Lead capture, qualification & smart routing
            </div>
            <div class="flow-bullet">
              <svg viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M20 7L9 18l-5-5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
              Automatic reminders & follow-ups
            </div>
          </div>
        </div>

        <div class="flow-wrap">
          <div class="flow-grid" aria-hidden="true">
            <div class="flow-card flow-phone">üìû Phone call</div>
            <div class="flow-card flow-route">üîÄ Smart routing</div>
            <div class="flow-card flow-book">üìÖ Easy booking</div>
            <div class="flow-card flow-chat">üí¨ Chat</div>
            <div class="flow-card flow-loop">‚ôªÔ∏è Engagement loop</div>
          </div>

          <div class="flow-lines" aria-hidden="true">
            <svg viewBox="0 0 100 100" preserveAspectRatio="none">
              <path d="M33 25 C40 25, 42 25, 50 25" fill="none" stroke="url(#g1)" stroke-width="1.6"/>
              <path d="M66 25 C72 25, 76 25, 82 25" fill="none" stroke="url(#g1)" stroke-width="1.6"/>
              <path d="M50 35 C50 45, 37 50, 33 58" fill="none" stroke="url(#g1)" stroke-width="1.6"/>
              <path d="M82 35 C82 45, 66 50, 66 58" fill="none" stroke="url(#g1)" stroke-width="1.6"/>
              <defs>
                <linearGradient id="g1" x1="0" y1="0" x2="1" y2="0">
                  <stop offset="0%" stop-color="#60a5fa"/>
                  <stop offset="100%" stop-color="#a78bfa"/>
                </linearGradient>
              </defs>
            </svg>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- SOLUTIONS -->
  <section id="solutions" class="section-light py-20">
    <div class="wrap px-6">
      <h2 class="font-display text-4xl md:text-5xl font-bold tracking-[-0.02em] text-slate-800 text-center">
        AI Call Automation‚ÄîBuilt for Growth
      </h2>

      <div class="solutions-grid mt-10">
        <article class="plan-card">
          <div class="plan-head">
            <div class="dot-matrix" aria-hidden="true"></div>
            <div>
              <span class="plan-chip">Proactive</span>
              <h3 class="plan-title mt-2"><span class="text-brand-600">Outbound</span> campaigns</h3>
              <p class="plan-sub">Warm leads, re-engage old ones, and follow up automatically.</p>
            </div>
          </div>
          <a href="pricing.html#outbound" class="plan-cta">VIEW PRICING</a>
          <div class="features">
            <div class="feat">Sequenced outreach with throttling</div>
            <div class="feat">Personalized scripts & context memory</div>
            <div class="feat">CRM write-backs & pipeline sync</div>
            <div class="feat">Conversion & pickup-rate analytics</div>
            <div class="feat">A/B prompts & voice variants</div>
          </div>
        </article>

        <article class="plan-card">
          <div class="plan-head">
            <div class="dot-matrix" aria-hidden="true"></div>
            <div>
              <span class="plan-chip">Answer & Book</span>
              <h3 class="plan-title mt-2"><span class="text-brand-600">Inbound</span> reception</h3>
              <p class="plan-sub">Pick up every call, resolve questions, and schedule on the spot.</p>
            </div>
          </div>
          <a href="pricing.html#inbound" class="plan-cta">VIEW PRICING</a>
          <div class="features">
            <div class="feat">24/7 answering with smart routing</div>
            <div class="feat">Live calendar offers & confirmations</div>
            <div class="feat">Knowledge-base/FAQ grounding</div>
            <div class="feat">Handoff to humans when needed</div>
            <div class="feat">Sentiment & call summaries</div>
          </div>
        </article>
      </div>
    </div>
  </section>

  <!-- Custom Workflow -->
  <section class="section-light py-12">
    <div class="wrap px-6">
      <div class="workflow-unified mt-4">
        <div class="wf-col wf-left">
          <h3 class="text-slate-800 text-2xl md:text-3xl font-extrabold tracking-[-0.01em]">
            Custom <span class="text-brand-600">Workflows</span>
          </h3>
          <p class="text-slate-600 mt-2 max-w-xl">
            We map your intake, routing, and scheduling rules into a reliable voice flow.
            You get fewer missed calls and more booked revenue.
          </p>
          <div class="wf-mosaic" aria-hidden="true"></div>
        </div>

        <div class="wf-col wf-right">
          <a href="book.html?intent=custom-workflows" class="wf-pill">CONTACT SALES</a>
          <div class="features mt-6">
            <div class="feat">Process discovery & KPI alignment</div>
            <div class="feat">Tooling + CRM integration plan</div>
            <div class="feat">Iterative prompt/voice tuning</div>
            <div class="feat">Launch, monitor, refine</div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="py-12">
    <div class="wrap px-6 flex items-center justify-between">
      <p class="text-sm text-slate-400">¬© <span id="y"></span> Agentlyne</p>
      <div class="flex gap-3">
        <a class="btn btn-outline" href="pricing.html">Pricing</a>
        <a class="btn btn-primary" href="book.html">Book a Call</a>
      </div>
    </div>
  </footer>

  <!-- Utility Scripts: year, carousel, background -->
  <script>
    // Year
    const yEl = document.getElementById('y');
    if (yEl) yEl.textContent = new Date().getFullYear();

    // ----- Carousel -----
    const cards = Array.from(document.querySelectorAll('.card'));
    const dots  = Array.from(document.querySelectorAll('.dot'));
    let currentIndex = 1; // center
    let isAnimating = false;

    function setParallax(){
      const unit  = Math.min(window.innerWidth, 1600) * 0.13;
      const shift = (1 - currentIndex) * unit;
      document.documentElement.style.setProperty('--bg-shift',  `${shift}px`);
      document.documentElement.style.setProperty('--orb-shift', `${shift * 0.65}px`);
      document.documentElement.style.setProperty('--fg-shift',  `${shift * 0.20}px`);
    }
    function updateDots(){
      dots.forEach((d,i)=>{
        const on = i===currentIndex;
        d.classList.toggle('active', on);
        d.setAttribute('aria-selected', on ? 'true' : 'false');
      });
    }
    function layout(index){
      cards.forEach((card,i)=>{
        card.classList.remove('active','prev','next','hidden');
        let diff = i - index; if (diff < 0) diff += cards.length;
        if (diff===0) card.classList.add('active');
        else if (diff===1) card.classList.add('next');
        else if (diff===cards.length-1) card.classList.add('prev');
        else card.classList.add('hidden');
      });
    }
    function updateCarousel(index){
      if (isAnimating) return;
      isAnimating = true;
      currentIndex = index;
      layout(currentIndex);
      updateDots();
      setParallax();
      setTimeout(()=>{ isAnimating = false; }, 900);
    }
    function nextSlide(){ updateCarousel((currentIndex+1) % cards.length); }
    function prevSlide(){ updateCarousel((currentIndex-1 + cards.length) % cards.length); }

    document.getElementById('nextBtn')?.addEventListener('click', nextSlide);
    document.getElementById('prevBtn')?.addEventListener('click', prevSlide);
    document.addEventListener('keydown', (e)=>{ if (e.key==='ArrowRight') nextSlide(); if (e.key==='ArrowLeft') prevSlide(); });
    dots.forEach(d=> d.addEventListener('click', ()=> updateCarousel(+d.dataset.go)));
    cards.forEach((card,idx)=> card.addEventListener('click', ()=>{ if(!card.classList.contains('active')) updateCarousel(idx); }));
    layout(currentIndex); updateDots(); setParallax(); window.addEventListener('resize', setParallax);

    // Subtle background (stars)
    (function(){
      const c = document.getElementById('bgCanvas');
      if (!c) return;
      const ctx = c.getContext('2d', {alpha:true});
      let dpr = Math.max(1, window.devicePixelRatio||1);
      let W, H; const particles = [];
      function resize(){
        W = c.width  = Math.floor(innerWidth * dpr);
        H = c.height = Math.floor(innerHeight * dpr);
        c.style.width  = innerWidth + 'px';
        c.style.height = innerHeight + 'px';
      }
      resize(); addEventListener('resize', resize);
      for (let i=0;i<50;i++){
        particles.push({x:Math.random()*W,y:Math.random()*H,vx:(Math.random()-.5)*.2,vy:(Math.random()-.5)*.2,r:Math.random()*2+1,o:Math.random()*.5+.1});
      }
      (function loop(){
        ctx.clearRect(0,0,W,H);
        particles.forEach(p=>{
          p.x+=p.vx; p.y+=p.vy;
          if(p.x<0)p.x=W; if(p.x>W)p.x=0;
          if(p.y<0)p.y=H; if(p.y>H)p.y=0;
          ctx.beginPath(); ctx.arc(p.x,p.y,p.r*dpr,0,Math.PI*2);
          ctx.fillStyle = `rgba(142,202,230,${p.o})`;
          ctx.fill();
        });
        requestAnimationFrame(loop);
      })();
    })();
  </script>

  <!-- Retell Modal -->
  <div id="retell-modal" class="retell-modal" role="dialog" aria-modal="true" aria-label="Live demo">
    <div class="retell-card">
      <button id="retell-close" class="retell-close" aria-label="Close">√ó</button>
      <div id="retell-root" style="width:100%;height:100%;"></div>
    </div>
  </div>

  <!-- Live Demo controller -->
  <script>
    const modal = document.getElementById('retell-modal');
    const root  = document.getElementById('retell-root');
    const close = document.getElementById('retell-close');
    const btn   = document.getElementById('live-demo');
    let client = null;

    const showModal = () => { modal.style.display = 'flex'; document.body.classList.add('modal-open'); };
    const hideModal = () => {
      modal.style.display = 'none';
      document.body.classList.remove('modal-open');
      root.innerHTML = '';
      try { client?.endCall?.(); client?.hangUp?.(); } catch {}
      client = null;
    };
    close?.addEventListener('click', hideModal);

    const SDK_SOURCES = [
    '/sdk/retell.v1.js?v=1',             <!-- NEW unique URL -->
    'https://cdn.jsdelivr.net/npm/@retellai/web-sdk@latest/dist/bundle.umd.js',
    'https://unpkg.com/@retellai/web-sdk@latest/dist/bundle.umd.js',
    'https://cdn.retellai.com/webclient/retell-webclient.umd.js'
  ];

    function getCtor() {
      return window.RetellWebClient ||
             (window.Retell && (window.Retell.RetellWebClient || window.Retell.WebClient)) ||
             null;
    }
    function loadScript(src) {
      return new Promise((resolve, reject) => {
        const s = document.createElement('script');
        s.src = src; s.async = true; s.crossOrigin = 'anonymous'; s.referrerPolicy = 'no-referrer';
        s.onload = () => resolve(src);
        s.onerror = () => reject(new Error('load error: ' + src));
        document.head.appendChild(s);
      });
    }
    async function ensureSDK() {
      if (getCtor()) return;
      let lastErr;
      for (const url of SDK_SOURCES) {
        try {
          console.log('[retell] loading', url);
          await loadScript(url);
          if (getCtor()) return;
        } catch (e) { lastErr = e; console.warn('[retell] failed', url, e?.message||e); }
      }
      throw lastErr || new Error('Retell SDK failed to load');
    }

    async function startLiveDemo() {
      try {
        await ensureSDK();
        const RetellCtor = getCtor();
        if (!RetellCtor) throw new Error('Retell SDK not available');

        await navigator.mediaDevices.getUserMedia({ audio: true });

        showModal();
        client = new RetellCtor();
        client.on?.('call_ended', hideModal);
        client.on?.('call-ended', hideModal);
        client.on?.('error', e => console.error('[retell:error]', e));

        await client.createCall({ container: root, theme: 'dark' });

        const r = await fetch('/api/retell/create-web-call', { method: 'POST' });
        const data = await r.json().catch(() => ({}));
        if (!r.ok || !data?.access_token) {
          throw new Error(data?.error || `Token endpoint bad response (${r.status})`);
        }
        await client.startCall({ accessToken: data.access_token });
      } catch (err) {
        console.error('[live-demo]', err);
        alert(`Could not start the live demo:\n${err.message || err}`);
        hideModal();
      }
    }

    btn?.addEventListener('click', (e) => { e.preventDefault(); startLiveDemo(); });
  </script>
</body>
</html>
